<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Speciaal Transport Zwolle B.V. - Begeleidingenrapport</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="print.css" media="print">
</head>
<body>

<header>
    <img src="logo.png" alt="Speciaal Transport Zwolle B.V." class="logo">
    <h1>SPECIAAL TRANSPORT ZWOLLE B.V. - BEGELEIDINGENRAPPORT</h1>
</header>

<nav class="top-menu">
  <button onclick="window.location.href='index.html'">üè† HOME</button>
  <button onclick="window.location.href='vergunningen.html'">INBOEKEN VERGUNNINGEN</button>
  <button onclick="window.location.href='ontheffingenrapport.html'">ONTHEFFINGEN RAPPORT</button>
  <button onclick="window.location.href='begeleidingenrapport.html'">BEGELEIDINGEN RAPPORT</button>
  <button onclick="window.location.href='aanvraagtransportbegeleiding.html'">AANVRAAG TRANSPORTBEGELEIDING</button>
</nav>

<main class="card">
    <h2>BEGELEIDINGEN RAPPORT</h2>

    <div class="form-grid">
        <label>Referentienummer:
            <div class="split-input">
                <span class="prefix">2025.</span>
                <input type="text" id="referentienummer" maxlength="4" placeholder="4 cijfers">
            </div>
        </label>
        <label>Behandelaar:
            <select id="behandelaar">
                <option value="">--- Maak keuze ---</option>
                <option value="Ren√©">Ren√©</option>
                <option value="Anke">Anke</option>
                <option value="Sia">Sia</option>
                <option value="Martijn">Martijn</option>
            </select>
        </label>
    </div>

    <div class="form-grid-three">
        <label>Opdrachtgever:
            <input type="text" id="opdrachtgever" placeholder="Naam opdrachtgever">
        </label>
        <label>Vervoerder:
            <input type="text" id="vervoerder" placeholder="Naam vervoerder">
        </label>
        <label>Referentie klant:
            <input type="text" id="referentie_klant" placeholder="Referentie klant">
        </label>
    </div>

    <div class="form-grid-single">
        <label>Omschrijving:
            <textarea id="omschrijving" placeholder="Transport, voertuig, route, etc."></textarea>
        </label>
    </div>

    <div class="form-grid-single">
        <label>Opmerkingen t.a.v. facturatie:
            <textarea id="opmerkingen_facturatie" placeholder="Bijvoorbeeld factuurreferenties of betaalafspraken"></textarea>
        </label>
    </div>

    <h3>Details per regel</h3>
    <div class="form-grid-seven">
        <div>
            <label>Begeleidingsfirma:</label>
            <input type="text" value="Bemiddeling STZ"><input type="text"><input type="text"><input type="text">
            <input type="text"><input type="text"><input type="text"><input type="text">
        </div>
        <div>
            <label>Transportdatum:</label>
            <input type="date"><input type="date"><input type="date"><input type="date">
            <input type="date"><input type="date"><input type="date"><input type="date">
        </div>
        <div>
            <label>Van:</label>
            <input type="text"><input type="text"><input type="text"><input type="text">
            <input type="text"><input type="text"><input type="text"><input type="text">
        </div>
        <div>
            <label>Naar:</label>
            <input type="text"><input type="text"><input type="text"><input type="text">
            <input type="text"><input type="text"><input type="text"><input type="text">
        </div>
        <div>
            <label>Uren:</label>
            <input type="number"><input type="number"><input type="number"><input type="number">
            <input type="number"><input type="number"><input type="number"><input type="number">
        </div>
        <div>
            <label>Inkoopprijs (‚Ç¨):</label>
            <input type="number" step="0.01"><input type="number" step="0.01"><input type="number" step="0.01"><input type="number" step="0.01">
            <input type="number" step="0.01"><input type="number" step="0.01"><input type="number" step="0.01"><input type="number" step="0.01">
        </div>
        <div>
            <label>Verkoopprijs (‚Ç¨):</label>
            <input type="number" step="0.01" value="75.00"><input type="number" step="0.01"><input type="number" step="0.01"><input type="number" step="0.01">
            <input type="number" step="0.01"><input type="number" step="0.01"><input type="number" step="0.01"><input type="number" step="0.01">
        </div>
    </div>

    <div class="form-grid-three">
        <label>Inkoopprijs totaal (‚Ç¨):
            <input type="text" id="inkoop_totaal" readonly>
        </label>
        <label>Verkoopprijs totaal (‚Ç¨):
            <input type="text" id="verkoop_totaal" readonly>
        </label>
        <label>Marge (‚Ç¨):
            <input type="text" id="marge" readonly>
        </label>
    </div>

    

<button onclick="window.print()" class="primary-btn">AFDRUKKEN</button>
<button onclick="genereerPDF()" class="primary-btn">üì• DOWNLOAD ALS PDF</button>

<button onclick="genereerPDF()" class="primary-btn">üì• DOWNLOAD ALS PDF</button>

</main>

<footer>
    Ontwikkeld door Ren√© van Bavel ¬©2025 Speciaal Transport Zwolle B.V.
</footer>

<script>
document.addEventListener('input', () => {
  const inkoopInputs = document.querySelectorAll('.form-grid-seven > div:nth-child(6) input[type="number"]');
  const verkoopInputs = document.querySelectorAll('.form-grid-seven > div:nth-child(7) input[type="number"]');

  let inkoopTotaal = 0;
  let verkoopTotaal = 0;

  inkoopInputs.forEach(input => {
    const waarde = parseFloat(input.value);
    if (!isNaN(waarde)) {
      inkoopTotaal += waarde;
    }
  });

  verkoopInputs.forEach(input => {
    const waarde = parseFloat(input.value);
    if (!isNaN(waarde)) {
      verkoopTotaal += waarde;
    }
  });

  const marge = verkoopTotaal - inkoopTotaal;
  const format = waarde => `‚Ç¨ ${waarde.toFixed(2)}`;

  document.getElementById('inkoop_totaal').value = format(inkoopTotaal);
  document.getElementById('verkoop_totaal').value = format(verkoopTotaal);
  document.getElementById('marge').value = format(marge);
});

document.addEventListener('DOMContentLoaded', () => {
  // Force trigger input event to calculate totals on page load
  const firstVerkoopInput = document.querySelector('.form-grid-seven > div:nth-child(7) input[type="number"]');
  if (firstVerkoopInput) {
    const event = new Event('input', { bubbles: true });
    firstVerkoopInput.dispatchEvent(event);
  }
});
</script>



<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
function genereerPDF() {
  const element = document.querySelector("main");
  const opt = {
    margin:       0.5,
    filename:     'rapport.pdf',
    image:        { type: 'jpeg', quality: 0.98 },
    html2canvas:  { scale: 2 },
    jsPDF:        { unit: 'in', format: 'a4', orientation: 'portrait' }
  };
  html2pdf().set(opt).from(element).save();
}
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
function genereerPDF() {
  const element = document.querySelector("main");
  const opt = {
    margin: [0.5, 0.5, 0.5, 0.5],
    filename: 'rapport.pdf',
    image: { type: 'jpeg', quality: 0.98 },
    html2canvas: { scale: 2, useCORS: true },
    jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' },
    pagebreak: { mode: ['avoid-all', 'css', 'legacy'] }
  };
  html2pdf().set(opt).from(element).save();
}
</script>
</body>
</html>
