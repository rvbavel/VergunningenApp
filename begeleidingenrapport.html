<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>Speciaal Transport Zwolle B.V. - Begeleidingenrapport</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="print.css" media="print">
</head>
<body>

<header>
  <img src="logo.png" alt="Speciaal Transport Zwolle B.V." class="logo">
  <h1>SPECIAAL TRANSPORT ZWOLLE B.V. - BEGELEIDINGENRAPPORT</h1>
</header>

<main class="card">
  <h2>BEGELEIDINGEN RAPPORT</h2>

  <div class="form-grid">
    <label>Referentienummer:
      <div class="split-input">
        <span class="prefix">2025.</span>
        <input type="text" id="referentienummer" maxlength="4">
      </div>
    </label>
    <label>Behandelaar:
      <select id="behandelaar">
        <option value="">--- Maak keuze ---</option>
        <option value="RenÃ©">RenÃ©</option>
        <option value="Anke">Anke</option>
        <option value="Sia">Sia</option>
        <option value="Martijn">Martijn</option>
      </select>
    </label>
  </div>

  <div class="form-grid-three">
    <label>Opdrachtgever:
      <input type="text" id="opdrachtgever">
    </label>
    <label>Vervoerder:
      <input type="text" id="vervoerder">
    </label>
    <label>Referentie klant:
      <input type="text" id="referentie_klant">
    </label>
  </div>

  <div class="form-grid-single">
    <label>Omschrijving:
      <textarea id="omschrijving"></textarea>
    </label>
  </div>

  <div class="form-grid-single">
    <label>Opmerkingen t.a.v. facturatie:
      <textarea id="opmerkingen_facturatie"></textarea>
    </label>
  </div>

  <h3>Details per regel</h3>
  <div class="form-grid-seven">
    <div>
      <label>Begeleidingsfirma:</label>
      <input type="text" value="Bemiddeling STZ"><input><input><input><input><input><input><input>
    </div>
    <div>
      <label>Transportdatum:</label>
      <input type="date"><input type="date"><input type="date"><input type="date">
      <input type="date"><input type="date"><input type="date"><input type="date">
    </div>
    <div>
      <label>Van:</label>
      <input><input><input><input><input><input><input><input>
    </div>
    <div>
      <label>Naar:</label>
      <input><input><input><input><input><input><input><input>
    </div>
    <div>
      <label>Uren:</label>
      <input type="number"><input type="number"><input type="number"><input type="number">
      <input type="number"><input type="number"><input type="number"><input type="number">
    </div>
    <div>
      <label>Inkoopprijs (â‚¬):</label>
      <input type="text" data-type="inkoop"><input type="text" data-type="inkoop">
      <input type="text" data-type="inkoop"><input type="text" data-type="inkoop">
      <input type="text" data-type="inkoop"><input type="text" data-type="inkoop">
      <input type="text" data-type="inkoop"><input type="text" data-type="inkoop">
    </div>
    <div>
      <label>Verkoopprijs (â‚¬):</label>
      <input type="text" data-type="verkoop"><input type="text" data-type="verkoop">
      <input type="text" data-type="verkoop"><input type="text" data-type="verkoop">
      <input type="text" data-type="verkoop"><input type="text" data-type="verkoop">
      <input type="text" data-type="verkoop"><input type="text" data-type="verkoop">
    </div>
  </div>

  <div class="form-grid-three">
    <label>Inkoopprijs totaal (â‚¬):
      <input type="text" id="inkoop_totaal" readonly>
    </label>
    <label>Verkoopprijs totaal (â‚¬):
      <input type="text" id="verkoop_totaal" readonly>
    </label>
    <label>Marge (â‚¬):
      <input type="text" id="marge" readonly>
    </label>
  </div>

  <button onclick="genereerPDF()" class="primary-btn">ðŸ“¥ DOWNLOAD ALS PDF</button>
</main>

<footer>
  Ontwikkeld door RenÃ© van Bavel Â©2025 Speciaal Transport Zwolle B.V.
</footer>

<script>
function formatEuro(value) {
  const number = parseFloat(value);
  if (isNaN(number)) return '';
  return number.toFixed(2).replace('.', ',');
}

function parseEuroString(value) {
  return parseFloat(value.replace(',', '.').replace('â‚¬', '').trim()) || 0;
}

function updateTotals() {
  const inkoopInputs = document.querySelectorAll('input[data-type="inkoop"]');
  const verkoopInputs = document.querySelectorAll('input[data-type="verkoop"]');

  let inkoopTotaal = 0;
  let verkoopTotaal = 0;

  inkoopInputs.forEach(input => {
    const bedrag = parseEuroString(input.value);
    inkoopTotaal += bedrag;
  });

  verkoopInputs.forEach(input => {
    const bedrag = parseEuroString(input.value);
    verkoopTotaal += bedrag;
  });

  const marge = verkoopTotaal - inkoopTotaal;

  document.getElementById('inkoop_totaal').value = `â‚¬ ${inkoopTotaal.toFixed(2).replace('.', ',')}`;
  document.getElementById('verkoop_totaal').value = `â‚¬ ${verkoopTotaal.toFixed(2).replace('.', ',')}`;
  document.getElementById('marge').value = `â‚¬ ${marge.toFixed(2).replace('.', ',')}`;
}

document.addEventListener('DOMContentLoaded', () => {
  const urenInputs = document.querySelectorAll('.form-grid-seven > div:nth-child(5) input');
  const verkoopInputs = document.querySelectorAll('input[data-type="verkoop"]');

  urenInputs.forEach((input, index) => {
    input.addEventListener('input', () => {
      const uren = parseFloat(input.value);
      if (!isNaN(uren)) {
        verkoopInputs[index].value = (uren * 62.5).toFixed(2).replace('.', ',');
        updateTotals();
      }
    });
  });

  document.querySelectorAll('input[data-type="inkoop"], input[data-type="verkoop"]').forEach(input => {
    input.addEventListener('blur', () => {
      const bedrag = parseEuroString(input.value);
      input.value = formatEuro(bedrag);
      updateTotals();
    });
  });

  updateTotals();
});
</script>

</body>
</html>
